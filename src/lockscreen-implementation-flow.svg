<?xml version="1.0" encoding="UTF-8"?>
<svg width="1200" height="1000" viewBox="0 0 1200 1000" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <!-- 定义渐变色 -->
    <linearGradient id="configGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#e1f5fe;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#b3e5fc;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="monitorGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#fff3e0;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#ffcc02;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="lockGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#ffcdd2;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#f44336;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="unlockGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#c8e6c9;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#4caf50;stop-opacity:1" />
    </linearGradient>
  </defs>
  
  <!-- 标题 -->
  <text x="600" y="30" text-anchor="middle" font-family="Arial, sans-serif" font-size="24" font-weight="bold" fill="#333">
    锁屏功能实现架构流程图
  </text>
  
  <!-- 配置阶段 -->
  <g id="config-stage">
    <!-- 用户配置锁屏 -->
    <rect x="50" y="80" width="180" height="60" rx="10" fill="url(#configGradient)" stroke="#0277bd" stroke-width="2"/>
    <text x="140" y="110" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#0277bd">
      <tspan x="140" dy="0">用户打开</tspan>
      <tspan x="140" dy="16">锁屏设置</tspan>
    </text>
    
    <!-- 配置参数 -->
    <rect x="300" y="80" width="180" height="60" rx="10" fill="url(#configGradient)" stroke="#0277bd" stroke-width="2"/>
    <text x="390" y="110" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#0277bd">
      <tspan x="390" dy="0">配置锁屏参数</tspan>
    </text>
    
    <!-- 时间段设置 -->
    <rect x="550" y="30" width="150" height="50" rx="8" fill="#fff3e0" stroke="#ff9800" stroke-width="1"/>
    <text x="625" y="58" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#e65100">
      <tspan x="625" dy="0">时间段设置</tspan>
      <tspan x="625" dy="14">17:00-19:00</tspan>
    </text>
    
    <!-- 超时设置 -->
    <rect x="550" y="90" width="150" height="50" rx="8" fill="#fff3e0" stroke="#ff9800" stroke-width="1"/>
    <text x="625" y="118" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#e65100">
      <tspan x="625" dy="0">超时时长</tspan>
      <tspan x="625" dy="14">3分钟</tspan>
    </text>
    
    <!-- 保存配置 -->
    <rect x="550" y="150" width="150" height="50" rx="8" fill="#fff3e0" stroke="#ff9800" stroke-width="1"/>
    <text x="625" y="178" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#e65100">
      <tspan x="625" dy="0">保存到</tspan>
      <tspan x="625" dy="14">localStorage</tspan>
    </text>
  </g>
  
  <!-- 监控阶段 -->
  <g id="monitor-stage">
    <!-- 启动监控 -->
    <rect x="50" y="220" width="180" height="60" rx="10" fill="url(#monitorGradient)" stroke="#f57c00" stroke-width="2"/>
    <text x="140" y="250" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#e65100">
      <tspan x="140" dy="0">启动活动</tspan>
      <tspan x="140" dy="16">监控服务</tspan>
    </text>
    
    <!-- 事件监听 -->
    <rect x="300" y="220" width="180" height="60" rx="10" fill="url(#monitorGradient)" stroke="#f57c00" stroke-width="2"/>
    <text x="390" y="250" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#e65100">
      <tspan x="390" dy="0">监听用户事件</tspan>
    </text>
    
    <!-- 具体事件 -->
    <rect x="550" y="180" width="120" height="40" rx="6" fill="#f3e5f5" stroke="#9c27b0" stroke-width="1"/>
    <text x="610" y="203" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#6a1b9a">
      鼠标移动
    </text>
    
    <rect x="550" y="230" width="120" height="40" rx="6" fill="#f3e5f5" stroke="#9c27b0" stroke-width="1"/>
    <text x="610" y="253" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#6a1b9a">
      键盘输入
    </text>
    
    <rect x="550" y="280" width="120" height="40" rx="6" fill="#f3e5f5" stroke="#9c27b0" stroke-width="1"/>
    <text x="610" y="303" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#6a1b9a">
      点击事件
    </text>
    
    <!-- 更新活动时间 -->
    <rect x="300" y="360" width="180" height="60" rx="10" fill="url(#monitorGradient)" stroke="#f57c00" stroke-width="2"/>
    <text x="390" y="390" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#e65100">
      <tspan x="390" dy="0">更新最后</tspan>
      <tspan x="390" dy="16">活动时间</tspan>
    </text>
  </g>
  
  <!-- 检查阶段 -->
  <g id="check-stage">
    <!-- 定时检查 -->
    <rect x="50" y="480" width="180" height="60" rx="10" fill="#e8f5e8" stroke="#4caf50" stroke-width="2"/>
    <text x="140" y="510" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#2e7d32">
      <tspan x="140" dy="0">定时检查器</tspan>
      <tspan x="140" dy="16">每秒检查一次</tspan>
    </text>
    
    <!-- 时间段判断 -->
    <polygon points="350,480 450,510 350,540 250,510" fill="#ffeb3b" stroke="#f57c00" stroke-width="2"/>
    <text x="350" y="510" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#e65100">
      <tspan x="350" dy="-8">当前是否在</tspan>
      <tspan x="350" dy="12">锁屏时间段?</tspan>
    </text>
    
    <!-- 超时判断1 -->
    <polygon points="600,450 700,480 600,510 500,480" fill="#ffeb3b" stroke="#f57c00" stroke-width="2"/>
    <text x="600" y="480" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#e65100">
      <tspan x="600" dy="-8">无操作时间</tspan>
      <tspan x="600" dy="8">超过设定值?</tspan>
    </text>
    
    <!-- 超时判断2 -->
    <polygon points="600,530 700,560 600,590 500,560" fill="#ffeb3b" stroke="#f57c00" stroke-width="2"/>
    <text x="600" y="560" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#e65100">
      <tspan x="600" dy="-8">无操作时间</tspan>
      <tspan x="600" dy="8">超过默认值?</tspan>
    </text>
  </g>
  
  <!-- 锁屏阶段 -->
  <g id="lock-stage">
    <!-- 触发锁屏 -->
    <rect x="800" y="480" width="150" height="60" rx="10" fill="url(#lockGradient)" stroke="#d32f2f" stroke-width="2"/>
    <text x="875" y="510" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#fff">
      <tspan x="875" dy="0">触发锁屏</tspan>
    </text>
    
    <!-- 锁屏界面元素 -->
    <rect x="800" y="580" width="120" height="40" rx="6" fill="#ffcdd2" stroke="#d32f2f" stroke-width="1"/>
    <text x="860" y="603" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#b71c1c">
      全屏遮罩
    </text>
    
    <rect x="800" y="630" width="120" height="40" rx="6" fill="#ffcdd2" stroke="#d32f2f" stroke-width="1"/>
    <text x="860" y="653" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#b71c1c">
      🔒 锁屏图标
    </text>
    
    <rect x="800" y="680" width="120" height="40" rx="6" fill="#ffcdd2" stroke="#d32f2f" stroke-width="1"/>
    <text x="860" y="703" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#b71c1c">
      密码输入框
    </text>
    
    <rect x="800" y="730" width="120" height="40" rx="6" fill="#ffcdd2" stroke="#d32f2f" stroke-width="1"/>
    <text x="860" y="753" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#b71c1c">
      禁用页面交互
    </text>
  </g>
  
  <!-- 解锁阶段 -->
  <g id="unlock-stage">
    <!-- 密码验证 -->
    <polygon points="950,650 1050,680 950,710 850,680" fill="#ffeb3b" stroke="#f57c00" stroke-width="2"/>
    <text x="950" y="680" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#e65100">
      密码验证
    </text>
    
    <!-- 解锁成功 -->
    <rect x="1000" y="780" width="150" height="60" rx="10" fill="url(#unlockGradient)" stroke="#388e3c" stroke-width="2"/>
    <text x="1075" y="810" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#fff">
      <tspan x="1075" dy="0">解锁屏幕</tspan>
    </text>
    
    <!-- 解锁失败 -->
    <rect x="750" y="780" width="150" height="60" rx="10" fill="#ffcdd2" stroke="#d32f2f" stroke-width="2"/>
    <text x="825" y="810" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#b71c1c">
      <tspan x="825" dy="0">提示错误</tspan>
    </text>
  </g>
  
  <!-- 恢复阶段 -->
  <g id="restore-stage">
    <!-- 恢复界面 -->
    <rect x="1000" y="900" width="150" height="40" rx="8" fill="url(#unlockGradient)" stroke="#388e3c" stroke-width="1"/>
    <text x="1075" y="923" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#fff">
      恢复页面交互
    </text>
  </g>
  
  <!-- 连接线 -->
  <g id="arrows" stroke="#666" stroke-width="2" fill="none" marker-end="url(#arrowhead)">
    <defs>
      <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
        <polygon points="0 0, 10 3.5, 0 7" fill="#666" />
      </marker>
    </defs>
    
    <!-- 主流程线 -->
    <path d="M 230 110 L 300 110" />
    <path d="M 480 110 L 550 110" />
    <path d="M 140 140 L 140 220" />
    <path d="M 230 250 L 300 250" />
    <path d="M 480 250 L 550 250" />
    <path d="M 390 280 L 390 360" />
    <path d="M 390 420 L 140 460 L 140 480" />
    <path d="M 230 510 L 250 510" />
    <path d="M 450 510 L 500 480" />
    <path d="M 450 520 L 500 560" />
    <path d="M 700 480 L 800 510" />
    <path d="M 700 560 L 800 510" />
    <path d="M 875 540 L 875 580" />
    <path d="M 920 680 L 950 680" />
    <path d="M 950 710 L 825 780" />
    <path d="M 1050 680 L 1075 780" />
    <path d="M 825 840 L 875 680" />
    <path d="M 1075 840 L 1075 900" />
    
    <!-- 循环线 -->
    <path d="M 50 520 L 20 520 L 20 400 L 300 400" stroke-dasharray="5,5" />
    <path d="M 1150 920 L 1180 920 L 1180 400 L 300 400" stroke-dasharray="5,5" />
  </g>
  
  <!-- 标签说明 -->
  <text x="470" y="520" font-family="Arial, sans-serif" font-size="10" fill="#666">是</text>
  <text x="470" y="570" font-family="Arial, sans-serif" font-size="10" fill="#666">否</text>
  <text x="720" y="470" font-family="Arial, sans-serif" font-size="10" fill="#666">是</text>
  <text x="720" y="580" font-family="Arial, sans-serif" font-size="10" fill="#666">是</text>
  <text x="880" y="670" font-family="Arial, sans-serif" font-size="10" fill="#666">正确</text>
  <text x="880" y="770" font-family="Arial, sans-serif" font-size="10" fill="#666">错误</text>
  
  <!-- 模块标题 -->
  <text x="140" y="70" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#0277bd">配置层</text>
  <text x="140" y="210" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#f57c00">监控层</text>
  <text x="140" y="470" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#4caf50">检查层</text>
  <text x="875" y="470" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#d32f2f">执行层</text>
  <text x="1075" y="770" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#388e3c">恢复层</text>
</svg>
